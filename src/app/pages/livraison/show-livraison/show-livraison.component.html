<div class="delivery-details-container" *ngIf="!isLoading; else loading">
    <div class="header">
        <h1>Détails de la Livraison</h1>
        <button (click)="goToList()" class="btn-back">
            <i class="fas fa-arrow-left"></i> Retour
        </button>
    </div>

    <div class="content-grid" *ngIf="livraison">
        <!-- Map Section -->
        <div class="map-container">
            <div id="map"></div>
        </div>

        <!-- Delivery Information -->
        <div class="info-container">
            <div class="info-card">
                <div class="card-header">
                    <i class="fas fa-info-circle"></i>
                    <h2>Informations Générales</h2>
                </div>
                <div class="card-content">
                    <p><span>ID:</span> {{ livraison.id }}</p>
                    <p><span>Statut:</span> 
                        <span [class]="'status-badge ' + livraison.statut.toLowerCase()">
                            {{ livraison.statut }}
                        </span>
                    </p>
                    <p><span>Date de Livraison:</span> {{ livraison.dateLivraisonReelle | date: 'dd/MM/yyyy' }}</p>
                </div>
            </div>

            <!-- Delivery Person Information -->
            <div class="info-card" *ngIf="livraison.livreur">
                <div class="card-header">
                    <i class="fas fa-user"></i>
                    <h2>Informations du Livreur</h2>
                </div>
                <div class="card-content">
                    <p><span>Nom:</span> {{ livraison.livreur.fullName }}</p>
                    <p><span>Email:</span> {{ livraison.livreur.email }}</p>
                    <p><span>Téléphone:</span> {{ livraison.livreur.phoneNumber }}</p>
                </div>
            </div>

            <!-- Package Information -->
            <div class="info-card" *ngIf="livraison.colis">
                <div class="card-header">
                    <i class="fas fa-box"></i>
                    <h2>Informations du Colis</h2>
                </div>
                <div class="card-content">
                    <p><span>ID:</span> {{ livraison.colis.id }}</p>
                    <p><span>Description:</span> {{ livraison.colis.description }}</p>
                    <p><span>Référence:</span> {{ livraison.colis.referenceSuivi }}</p>
                    <div class="address-info">
                        <p><span>Expéditeur:</span> {{ livraison.colis.adresseExpediteur }}</p>
                        <p><span>Destinataire:</span> {{ livraison.colis.adresseDestinataire }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #loading>
    <div class="loading-container">
        <div class="spinner"></div>
        <p>Chargement des informations de la livraison...</p>
    </div>
</ng-template>
